# Database-project
## 第九組 WIN88運彩下注系統
![](https://i.imgur.com/xRzXreg.png)

組員:109705003吳振豪、109705015鄭子安、109705017陳沛蓉、109705061王鳴謙、109705070羅方(皆為資財113級)
### 一、	資料庫
1.	users: 記錄帳戶訊息
![](https://i.imgur.com/VGgfTit.png)
User_ID是在php以亂數方式產生4到20位的獨特數字字串；Remaining為帳戶的餘額；Winrate紀錄該帳戶的勝率。
2.	sport: 記錄比賽資訊
![](https://i.imgur.com/OG41xdz.png)
以python抓下玩運彩(https://www.playsport.cc/index.php)中，4月份的比賽資料，並依前後端需求進行資料庫的編排。
3.	result: 記錄比賽結果，用於計算輸贏
![](https://i.imgur.com/TE9Y3dN.png)
在抓取比賽資訊的同時，記錄提供的四項下注選項的輸贏及開的選項(例如0為雙、1為單，不讓分有些場沒開即為NULL)，並以Game_ID對應到sport表。
4.	history: 記錄用戶下注的歷史資訊
![](https://i.imgur.com/1bmjL6S.png)
記錄各用戶下注的比賽選項及下注金額，Total_Cash_Flow為該次下的淨收入/支出，Pay以1/0記錄該場收益已付/未付。
5.	deposit: 記錄儲值情況
![](https://i.imgur.com/nVW2Gqp.png)
Total為User當下的Remaining加上該筆儲值的amount。
6.	user_article: 記錄討論區的文章
![](https://i.imgur.com/v6FO8fp.png)
發表文章時會記錄標題、分類、內容、發表時間。
(Img為圖片，但我們後來棄用了)
7.	user_message: 記錄文章的留言
![](https://i.imgur.com/T0mYVVN.png)
### 二、	前端展示及功能說明
1.	登入/註冊
![](https://i.imgur.com/Dgd8WCd.png)
輸入帳號和密碼登入，若無帳號可由下方”點此註冊”跳至註冊頁面。
登入及註冊皆有簡易防呆和檢測，避免空白input、錯誤密碼、註冊已存在之帳號等。註冊後會跳回登入頁面，輸入已註冊之帳密即可登入。(下圖為簡易防呆的錯誤訊息popup)
![](https://i.imgur.com/cT4I9Py.png)
2.	主視覺及運作邏輯: 
![](https://i.imgur.com/xePk1NE.png)
上方為navbar，提供不同功能的跳轉(點Logo會回到下注頁)
左方為討論區，會顯示已發表的文章標題
中間的區域為顯示各功能的地方。
點擊時間會跳出輸入框，可以更改時間使下注系統運作。
![](https://i.imgur.com/on6JHCL.png)
下注系統的運行邏輯: 以17:00為界線，在下注系統顯示該天的下注選項，同時更新下注歷史的盈虧狀況，以及高手下注中，各用戶的勝率、下注結果，以及該天的跟單選項。
舉例來說，系統時間為2022-04-02 20:00:00，此時可以下注4/3的比賽內容，同時也會更新並顯示4/2下注的盈虧狀況，高手下注中也會更新該用戶的下注內容及勝率。
3.	下注系統:
![](https://i.imgur.com/z0N6oWW.png)
顯示下注的比賽、各注的賠率以及盤分。其中下注的選項會依時間判定是否開放下注(淡灰色為disabled button，按了不會有反應)。
![](https://i.imgur.com/QztLk4u.png)
以賠率為選項，若按下開放下注的選項，會跳出確認下注的popup modal。其中會顯示下注的細節以及帳戶餘額，給用戶進行投注金額和選項的確認，系統也會試算用戶的投注金額在該倍率下最多能獲得的金額(不含成本，下100收益為155，淨賺55，這邊只顯示收益)
下方快速下注可提供用戶增加喜愛的金額(按+100=下注金額顯示的數字再+100)，若下注金額超過帳戶餘額，確認按鈕會變灰色(簡易防呆)。
以下會以該筆下注進行其他功能的說明。
![](https://i.imgur.com/05ClRLs.png)
4.	帳戶儲值
![](https://i.imgur.com/IQbknYE.png)
就是最基本的儲值。上方會顯示用戶名及當前餘額，輸入數字之後按儲值就會把錢加進去，下方也會同步顯示儲值的紀錄
5.	下注歷史
![](https://i.imgur.com/HNEiHVW.png)
下注歷史會顯示所有下注的場次。其中盈虧狀況會依時間顯示未開獎或是收益(淨收入/支出)，最下方會顯示截至目前為止的總收益。
![](https://i.imgur.com/QzuCC65.png)
(下注完剩340，4/3收益為175(騎士@尼克)+0(籃網@老鷹)，帳戶餘額變成515)
6.	高手下注
![](https://i.imgur.com/dxlSAos.png)
此功能會顯示前勝率前三名的用戶，並顯示出他們的最新5筆下注資料，其中若該用戶有新一天的注單，也會顯示在此，提供用戶跟單的功能。
“準”為該單獲勝，”冏”為該單失敗，同時也會顯示該用戶的下注總場次和過關次數。”?”代表是新一天的單，點選跟注就會跳出下注的popup model。
![](https://i.imgur.com/WOUTHSW.png)
7.	帳號設定:修改密碼/登出
![](https://i.imgur.com/Oeovfdw.png)
此功能就是更改密碼，會檢查目前密碼是否符合、新密碼是否和舊密碼重複、新密碼和確認密碼兩次輸入是否一致。
8.	討論區:發布貼文/發布留言
![](https://i.imgur.com/Cnws0nB.png)
點選發起討論便會跳到此頁面。輸入文章標題、選好文章類型(討論、預測、心情)和打完文章內容，便可送出一篇討論文章。
![](https://i.imgur.com/f5I584l.png)
點選左方的文章標題，便會跳到該文章，除了顯示文章的內容外，下方也有留言和刪除文章(只有發文者會顯示)的選項
![](https://i.imgur.com/lRbqzcO.png)
 (換個帳號留言後，同樣只有留言者可以刪除自己的留言)

### 三、	設計發想
我們想要做可以和生活有所連結又避免流於俗套的網站，剛好最近NBA季後賽開打，組內有一位同學非常喜歡使用線上的下注系統，大家也覺得投注的主題既有趣又有挑戰性，所以才選擇這個題目。
主要功能的設計和安排是認為普通的下注功能太過單一及欠缺互動性，所以加入了討論區以及高手下注的功能，參考其他人的注單的同時，也能和其他用戶一起討論和聊天。
### 四、	分工
鄭子安: 前端主視覺實作；儲值歷史、下注歷史、更改密碼之排版；企劃發想人\n
陳沛蓉: 高手下注前後端；整體排版設計；設計Logo\n
羅方: 登入後端(登入、註冊、更改密碼)；下注後端(含儲值和下注歷史)\n
吳振豪: 抓取比賽資料；登入/註冊頁面前端；下注頁面前端；整合程式碼(含debug和修改功能)；時間功能設計和整合(延遲顯示歷史下注盈虧、高手下注依時間顯示跟單、下注依時間顯示對應比賽、貼文和儲值的時間顯示等)；demo主講；寫報告\n
王鳴謙: 討論區前後端\n
